# 서로소 집합

- 서로소 집합
  - 공통 원소가 없는 두 집합
  - ex) {1, 2}와 {3, 4}는 서로소 관계임

- 서로소 집합 자료구조(= union-find 자료구조)
  - 서로소 부분 집합들로 나누어진 원소들의 데이터를 처리하기 위한 자료구조
    - 두 집합이 서로소 관계인지 확인 가능 == 각 집합이 어떤 원소를 공통으로 가지고 있는지 확인 가능
  - `union`과 `find` 2개의 연산으로 조작 가능
    - union 연산 : 2개의 원소가 포함된 집합을 하나의 집합으로 합치는 연산
    - find 연산 : 특정한 원소가 속한 집합이 어떤 집합인지 알려주는 연산
  - 일부 그래프 알고리즘에서 매우 중요하게 사용됨

## 서로소 집합(Union-Find) 자료구조

- `트리 자료구조`를 이용하여 집합 표현
- `서로소 집합 계산 알고리즘` : 서로소 정보가 주어졌을 때 트리 자료구조를 사용해서 집합을 표현
  - ① Union(합집합) 연산을 확인하여, 서로 연결된 두 노드 A,B를 확인
    - 1) A와 B의 루트 노드 A', B'를 각각 찾음
    - 2) A'를 B'의 부모 노드로 설정함(B'가 A'를 가리키도록 함)
  - ② 모든 Union(합집합) 연산을 처리할 때까지 ①번 과정을 반복
  - 일반적으로 A'와 B' 중에서 **더 번호가 작은 원소**가 **부모 노드**가 되도록 구현

- 예시) 전체 집합 : {1, 2, 3, 4, 5, 6} | 4개의 union 연산 : union1,4 union2,3 union2,4 union5,6 (='같은 집합에 속함'을 의미)
  - union 연산들은 그래프(트리) 형태로 표현 가능!
    - 각 원소는 그래프의 `노드`로 표현
    - '같은 집합에 속한다'는 의미의 union 연산들은 `간선`으로 표현
    - 즉, 6개의 노드와 4개의 간선이 존재하는 그래프(트리)로 표현 가능
      - 일반적으로 서로소 집합을 그림으로 표현할 때는 번호가 큰 노드(자식)가 번호가 작은 노드(부모)를 간선으로 가리키는 '트리구조' 사용!
  - union 연산을 토대로 그래프를 그리면 '연결성'으로 손쉽게 집합의 형태를 확인 가능
  - union 연산을 하나씩 확인하면서 서로 다른 두 원소에 대해 합집합(union)을 수행해야 할 때는, 각각 루트 노드를 찾아서 더 큰 루트 노드가 더 작은 루트 노드를 가리키도록 함
    - ① **먼저 노드의 개수(V) 크기의 부모 테이블 초기화**. 이때 모든 원소가 자기 자신을 부모로 가지도록 설정.
      - ❗부모 테이블은 말 그대로 부모에 대한 정보만 담고 있으므로, 실제 루트를 확인하고자 할 때는 재귀적으로 부모를 거슬러 올라가서 최종적인 루트노드 찾아야 함❗
    - ② union1,4(= 1과 4 합치기): 현재 루트노드는 각각 1과 4이기 때문에 더 큰 번호에 해당하는 **루트 노드 4의 부모**를 `1`로 설정
    - ③ union2,3(= 2와 3 합치기): 현재 루트노드는 각각 2와 3이기 때문에 더 큰 번호에 해당하는 **루트 노드 3의 부모**를 `2`로 설정
    - ④ union2,4(= 2와 4 합치기): 현재 루트노드는 각각 2와 1이기 때문에 더 큰 번호에 해당하는 **루트 노드 2의 부모**를 `1`로 설정
    - ⑤ union5,6(= 5와 6 합치기): 현재 루트노드는 각각 5와 6이기 때문에 더 큰 번호에 해당하는 **루트 노드 6의 부모**를 `5`로 설정

## 서로소 집합을 활용한 사이클 판별

- 서로소 집합은 `'무방향 그래프' 내에서의 사이클을 판별`할 때 사용 가능!
  - ↔'방향 그래프'내에서의 사이클 여부는 DFS를 사용하여 판별 가능
- 원리
  - union 연산은 그래프에서 간선으로 표현 가능
  - 따라서 간선을 하나씩 확인하면서 두 노드가 포함되어 있는 집합을 합치는 과정을 반복하면 사이클 유무 판별 가능
- 사이클 판별 알고리즘
  - ① 각 간선을 확인하며 두 노드의 루트 노드를 확인
    - 1) 루트 노드가 서로 다르다면, 두 노드에 대하여 union 연산을 수행 
    - 2) 루트 노드가 서로 같다면, 사이클(Cycle)이 발생한 것!
  - ② 그래프에 포함되어 있는 모든 간선에 대하여 ①번 과정 반복